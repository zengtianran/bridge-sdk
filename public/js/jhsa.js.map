{"version":3,"file":"jhsa.js","sources":["../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/@babel/runtime/helpers/esm/createClass.js","../../node_modules/@babel/runtime/helpers/esm/typeof.js","../../src/utils.js","../../src/core.js","../../src/initCore.js","../../src/init.js","../../src/invoke.js","../../src/main.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","\nconst _ua = window.navigator.userAgent\n/**\n * 判断类型\n * @param {*} type\n */\nfunction isType(type) {\n  return function(val) {\n    return Object.prototype.toString.call(val) === `[object ${type}]`\n  }\n}\nexport default {\n  ua: _ua,\n  isIOS() {\n    return /(iPhone|iPad|iPod|iOS)/i.test(_ua)\n  },\n  isAndroid() {\n    return /(Android)/i.test(_ua)\n  },\n  isWebView() {\n    return window && window.hasOwnProperty('document')\n  },\n  isAndroidWebView() {\n    return _ua.indexOf('Android') !== -1 || _ua.indexOf('Adr') > -1\n  },\n  isApp() {\n    return _ua.indexOf('COM_MSTPAY') > -1\n  },\n  isWX() {\n    return /MicroMessenger/i.test(_ua)\n  },\n  isAlipay() {\n    return /Alipay/i.test(_ua)\n  },\n  isString: isType('String'),\n  isFunction: isType('Function')\n}\n","\nimport utils from './utils'\n// 本地运行中的方法队列\nvar sendMessageQueue = []\n// 用于保存APP环境注册的方法，原生只能调用本地注册的方法集合，key是方法名，value是这个方法对应的回调\nvar messageHandlers = {}\n// 原生调用完方法后，会执行对应的回调ID，并删除\nvar responseCallbacks = {}\n// 递增唯一ID\nvar uniqueId = 1\n// 原生调用H5方法时，通过异步回调执行，加强安全性\nvar dispatchMessagesWithTimeoutSafety = true\n\n// jsBridge通信协议名称\nvar CUSTOM_PROTOCOL_SCHEME = 'https'\n// iframe连接方法\nvar QUEUE_HAS_MESSAGE = '__wvjs_queue_message__'\n\n/**\n * 注册函数，供原生调用\n * @param {String} handlerName 注册方法名\n * @param {Function} handler 处理函数\n */\nfunction registerHandler(handlerName, handler) {\n  // 判断参数格式\n  if (!handlerName || typeof handlerName !== 'string' || typeof handler !== 'function') {\n    return\n  }\n  messageHandlers[handlerName] = handler\n}\n/**\n * 调用原生暴露方法\n * @param {String} handlerName 调用方法名\n * @param {JSON} data 传递参数\n * @param {Function} responseCallback 原生执行完回调函数\n */\nfunction callHandler(handlerName, data, responseCallback) {\n  // 判断处理传递参数\n  if (arguments.length === 2 && typeof data === 'function') {\n    responseCallback = data\n    data = {}\n  }\n  // 发送消息\n  _doSend({ handlerName: handlerName, data: data }, responseCallback)\n}\n/**\n * 当本地调用callHandle, 通过url scheme通知了原生\n * 原生通过调用这个方法来获取当前正在调用的方法队列\n */\nfunction _fetchQueue() {\n  const messageQueueString = JSON.stringify(sendMessageQueue)\n  sendMessageQueue = []\n  return messageQueueString\n}\n/**\n * 原生调用H5注册方法或者调用回调方法\n * @param {json} messageJson 对应的调用方法详情\n */\nfunction _handleMessageFromNative(messageJson) {\n  if (dispatchMessagesWithTimeoutSafety) {\n    setTimeout(_doDispatchMessagesFromNative)\n  } else {\n    _doDispatchMessagesFromNative()\n  }\n  function _doDispatchMessagesFromNative() {\n    let message\n    try {\n      if (typeof messageJson === 'string') {\n        message = JSON.parse(messageJson)\n      } else {\n        message = messageJson\n      }\n    } catch (error) {\n      // 方法信息格式错误\n      throw new Error('原生调用H5方法出错，传入参数有误')\n    }\n    let responseCallback\n    if (message.responseId) {\n      // h5 callHandle调用原生，原生执行完，通知H5执行回调，回调函数ID是responseId\n      responseCallback = responseCallbacks[message.responseId]\n      if (!responseCallback) {\n        return\n      }\n      responseCallback && responseCallback(message.data)\n      delete responseCallbacks[message.responseId]\n    } else {\n      // 原生主动执行H5函数\n      if (message.callbackId) {\n        // 判断是否有回调\n        // 如果需要本地函数执行回调通知原生，那么在本地注册回调函数在通知原生\n        const callbackResponseId = message.callbackId\n        responseCallback = function(responseData) {\n          // H5回调执行完，再回调通知原生，通过_doSend发送原生触发回调。\n          _doSend({\n            handlerName: message.handlerName,\n            responseId: callbackResponseId,\n            responseData: responseData\n          })\n        }\n      }\n      // 从本地注册列表中获取方法\n      const handler = messageHandlers[message.handlerName]\n      const data = message.data\n      if (handler) {\n        // 执行本地注册方法并传入参数和回调\n        handler(data, responseCallback)\n      } else {\n        throw new Error('本地未注册此方法')\n      }\n    }\n  }\n}\n/**\n * JS调用原生方法前，消息发送到原生\n * @param {Object} message 调用的消息内容含方法名和参数\n * @param {Function} responseCallback 调用完方法后回调函数\n */\nfunction _doSend(message, responseCallback) {\n  if (responseCallback) {\n    const callbackId = _genCallbackId()\n    // 存储消息回调ID\n    responseCallbacks[callbackId] = responseCallback\n    // 把消息对应的回调ID和消息一起发送\n    message['callbackId'] = callbackId\n  }\n  let _src\n  if (utils.isIOS()) {\n    // ios中不需拦截url参数数据，通过拦截url scheme\n    // 将调用的方法详情存入消息队列中，原生主动获取\n    sendMessageQueue.push(message)\n    _src = getUri()\n  } else {\n    // android做兼容处理，将参数拼接到URL中\n    _src = getUri(message)\n  }\n  // 触发url scheme,通过iframe跳转scheme,发送数据\n  _sendMessage(_src)\n}\n/**\n * 生成回调函数唯一ID\n */\nfunction _genCallbackId() {\n  return `cb_${uniqueId++}_${new Date().getTime()}`\n}\n/**\n * 获取URL scheme,兼容android做法，安卓中不能获取JS函数返回值，通过协议传输\n * @param {Object} message 传递参数数据\n */\nfunction getUri(message) {\n  let uri = `${CUSTOM_PROTOCOL_SCHEME}://${QUEUE_HAS_MESSAGE}`\n  if (message) {\n    // callbackId作为端口号传递\n    let callbackId, method, params\n    if (message.callbackId) {\n      // H5主动调用原生方法回调\n      callbackId = message.callbackId\n      method = message.handlerName\n      params = message.data\n    } else if (message.responseId) {\n      // 原生调用H5方法后，H5回调\n      callbackId = message.responseId\n      method = message.handlerName\n      params = message.responseData\n    }\n    params = getParams(params)\n    uri += ':' + callbackId + '/' + method + '?' + params\n  }\n  return uri\n}\n/**\n * 对象转换成字符串\n * @param {Object} obj 对象数据\n */\nfunction getParams(obj) {\n  if (obj && typeof obj === 'object') {\n    return JSON.stringify(obj)\n  }\n  return obj || ''\n}\n/**\n * 调用iframe发送数据\n */\nconst _sendMessage = (function() {\n  let mesIframe = null\n  return function(src) {\n    if (!mesIframe) {\n      mesIframe = document.createElement('iframe')\n      mesIframe.style.display = 'none'\n      document.documentElement.appendChild(mesIframe)\n    }\n    mesIframe.src = src\n  }\n})()\nexport default {\n  registerHandler,\n  callHandler,\n  _handleMessageFromNative,\n  _fetchQueue\n}\n","/**\n * 初始化WebViewJsBridge\n */\nimport bridge from './core'\nexport function initMixin() {\n  if (!window.WebViewJavascriptBridge) {\n    window.WebViewJavascriptBridge = {\n      registerHandler: bridge.registerHandler,\n      callHandler: bridge.callHandler,\n      _handleMessageFromNative: bridge._handleMessageFromNative,\n      _fetchQueue: bridge._fetchQueue\n    }\n  }\n}\n","/**\n * 方法调用入口\n * @param {*} callback 回调函数\n */\nexport function setupWebViewJavascriptBridge(callback) {\n  try {\n    if (window.WebViewJavascriptBridge) {\n      callback(window.WebViewJavascriptBridge)\n    } else {\n      throw Error('jsBridge未注入成功，请刷新重试')\n    }\n  } catch (error) {\n    throw Error('jsBridge未注入成功，请刷新重试')\n  }\n}\n","// 如果非JS自动处理init初始化注入js模块又原生内置加载注入方法initMixin\n// 引入初始化函数\nimport { setupWebViewJavascriptBridge } from './init'\n/**\n * 调用APP方法\n * @param {*} method 调用方法名\n * @param {*} params 方法参数\n * @param {*} callback 成功回调函数\n */\nexport function callApp(method, params, callback) {\n  setupWebViewJavascriptBridge(function(bridge) {\n    bridge.callHandler(method, params, callback)\n  })\n}\n/**\n *  注册方法供原生调用\n * @param {*} method 注册方法名\n * @param {*} callback 处理函数\n */\nexport function registerApp(method, callback) {\n  setupWebViewJavascriptBridge(function(bridge) {\n    bridge.registerHandler(method, callback)\n  })\n}\n","import { initMixin } from './initCore'\nimport { callApp, registerApp } from './invoke'\n\nconst age = {}\nconsole.log(age)\n\nclass HsaSdk {\n  constructor() {\n    this._init()\n  }\n  _init() {\n    /**\n     * bridge初始化，定义与原生通讯相关方法\n     */\n    initMixin()\n  }\n  /**\n   * 调用APP注册方法\n   * @param {*} method\n   * @param {*} params\n   */\n  call(method, params) {\n    return new Promise((resolve, reject) => {\n      callApp(method, params, (data) => {\n        // data, 原生回调数据:todo处理数据格式\n        resolve(data)\n      })\n    })\n  }\n  /**\n   * JS注册方法供APP调\n   * @param {*} method 注册方法\n   */\n  register(method) {\n    return new Promise((resolve, reject) => {\n      registerApp(method, function(data, responseCallback) {\n        // data: 原生调用JS方法成功，返回数据\\参数；接收原⽣传过来数据，并处理逻辑\n        // responseCallback: 逻辑处理完执行原生回调,回调数据给原⽣ responseCallback({})\n        resolve(data, responseCallback)\n      })\n    })\n  }\n  /**\n   * 定义具体标准方法(刷脸验证)\n   */\n  faceVerify() {\n\n  }\n}\nexport default new HsaSdk()\n"],"names":["_ua","window","navigator","userAgent","isType","type","val","Object","prototype","toString","call","ua","isIOS","test","isAndroid","isWebView","hasOwnProperty","isAndroidWebView","indexOf","isApp","isWX","isAlipay","isString","isFunction","sendMessageQueue","messageHandlers","responseCallbacks","uniqueId","CUSTOM_PROTOCOL_SCHEME","QUEUE_HAS_MESSAGE","registerHandler","handlerName","handler","callHandler","data","responseCallback","arguments","length","_doSend","_fetchQueue","messageQueueString","JSON","stringify","_handleMessageFromNative","messageJson","setTimeout","_doDispatchMessagesFromNative","message","parse","error","Error","responseId","callbackId","callbackResponseId","responseData","_genCallbackId","_src","utils","push","getUri","_sendMessage","Date","getTime","uri","method","params","getParams","obj","mesIframe","src","document","createElement","style","display","documentElement","appendChild","initMixin","WebViewJavascriptBridge","bridge","setupWebViewJavascriptBridge","callback","callApp","registerApp","age","console","log","HsaSdk","_init","Promise","resolve","reject"],"mappings":"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"}